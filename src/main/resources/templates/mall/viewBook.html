<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="layout/layout">
<head th:replace="fragments/head::headFragment">
</head>
<!-- 메인 -->
<div layout:fragment="content">
  <link th:href="@{/css/mall.css}" rel="stylesheet">
  <script th:src="@{https://code.jquery.com/jquery-3.6.0.js}"></script>
  <script th:src="@{/js/star-rating.min.js}"></script>
  <script th:src="@{/js/mall.js}"></script>
  <!-- 본문 영역 -->
  <!--상품 정보 영역-->
  <div class="product">
    <div class="img-area">
      <img th:src="@{/imgs/book-imgs/} + ${book.book_img}" alt="???"/>
    </div>
    <div class="info-area">
      <span class="book-title">
        <th:block th:class="book-title" th:text="${book.book_nm}"></th:block>
      </span>
      <br>
      <hr>
      <span th:text="${book.book_author}"></span><br>
      <span th:text="${book.book_pub}"></span><br>
      <span th:text="${book.book_desc}"></span><br>
      <br><br><br>
      <span th:class="price" th:text="${book.book_price} + 원"></span><br>
      수량 <input type="number" name="qty" id="qty" value="1"><br>
      <input type="hidden" th:value="${book.book_no}" id="book_no">
      <div class="mb-3" id="btn-area">
        <a id="insert-cart" onclick="insertCart()" class="btn btn-primary">
          장바구니
        </a>
        <a id="order-btn" onclick="goOrder()" class="btn btn-primary">
          &nbsp;&nbsp;&nbsp;구매&nbsp;&nbsp;&nbsp;
        </a>
      </div>
    </div>
  </div>
  <!--리뷰 영역-->
  <div class="review-area">
    <h2>리뷰</h2>
    <table th:each="rev : ${reviews}">
      <tr>
        <td th:text="${rev.member.mem_uid}" class="id" rowspan="2"></td>
        <td th:text="${rev.rev_date}" class="date"></td>
      </tr>
      <tr>
        <td >
          <th:block th:each=" star : ${#numbers.sequence(1, 5)}">
            <span th:if="${rev.rev_rating >= star}">★</span>
            <span th:unless="${rev.rev_rating >= star}">☆</span>
          </th:block>
        </td>
      </tr>
      <tr>
        <td cl th:text="${rev.rev_title}" class="title" colspan="2"></td>
      </tr>
      <tr>
        <td colspan="5" th:text="${rev.rev_content}" class="content"></td>
      </tr>
    </table>
    <table>
      <tr th:each="cmt : ${cmts}" class="cmt-area">
        <td th:text="${cmt.member?.mem_uid}" width="50px" style="border-right: #2470dc 1px solid;"></td>
        <td th:text="${cmt.cmt_content}" width="383px"></td>
        <td th:text="${cmt.cmt_date}" width="150px"></td>
      </tr>
    </table>
  </div>
</div>
</html>